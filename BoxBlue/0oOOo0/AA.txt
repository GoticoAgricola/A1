UI.Label("-- FUNÃ‡OES--"):setColor('pink')


if player:getBlessings() == 0 then
    say("!bless")
    schedule(2000, function()
        if player:getBlessings() == 0 then
            error("!! Blessings not bought !!")
        end
    end)
end



macro(100, "Hold Target [ESC]", nil, function()
  if g_game.isAttacking() 
then
 oldTarget = g_game.getAttackingCreature()
  end
  if (oldTarget and oldTarget:getPosition()) 
then
 if (not g_game.isAttacking() and getDistanceBetween(pos(), oldTarget:getPosition()) <= 8) then

if (oldTarget:getPosition().z == posz()) then
        g_game.attack(oldTarget)
      end
    end
  end
end)

onKeyDown(function(keys)
 
if keys == "Escape" then
    oldTarget = nil
g_game.cancelAttack()
  end
end)







macro(3000, ".: TREINO ML :.", function() 
  say("Power Down")
end)

macro(10000, "HASTE(CORRER)", function()
  say('Speed Up')
end)



macro(250, "Atacar Seguindo", function()
   if g_game.isOnline() then
         g_game.setChaseMode(1)
           end
           end)

UI.Label("-- BUFF  --"):setColor('pink')


macro(5000, "Buff", function()   say("Mega Power Up")   say("Mega Power Up") end)





local ch = 'big Regeneration'
local chb = 'Big Regeneration'
local chc = 'big Regeneration'
local hpPercent = 99
macro(250, "BIG REGENERATION",  function()
  if (hppercent() <= hpPercent) then
    say(ch) 
    say(chb)
    say(chc)
  end
end)

UI.Label("-- COMO$AREA --"):setColor('pink')
macro(100, "KAMI", function()
if g_game.isAttacking() then
            say("Turtle Devastation")
            say("Rosh Attack")
            say("")
            say("")
            say("")
end
end)


local magia5 = ''
local magia4 = 'Turtle Devastation'
local magia3 = 'Rosh Attack'
local magia2 = ''
local magia1 = ''
local magiaDeArea = 'Full Spirit'
local distance = 1 -- distancia 
local amountOfMonsters = 2 -- quantidade de monstro

macro(100, "Combo UP",  function()
    local specAmount = 0
    if not g_game.isAttacking() then
        return
    end
    for i,mob in ipairs(getSpectators()) do
        if (getDistanceBetween(player:getPosition(), mob:getPosition())  <= distance and mob:isMonster())  then
            specAmount = specAmount + 1
        end
    end
    if (specAmount >= amountOfMonsters) then
        say('Full Spirit')
    else
        say(magia1)
        say(magia2)
        say(magia3)
        say(magia4)
        say(magia5)
    end
end)




------------

----------
local config = { -- higher priority first
--[index] = {min-hp,"spell name"},
  [1] = {20,""},
  [2] = {20,""},
  [3] = {20,""},
}
local exhausted = 1000
-- END CONFIG

macro(100,"Spell by Target HP",function()
  if not g_game.isAttacking() then return end
  local c = g_game.getAttackingCreature()
  local hp = c:getHealthPercent()
  for e, entry in ipairs(config) do
    if hp <= entry[1] then
      say(entry[2])
      delay(exhausted)
      return
    end
  end
end)











UI.Label("-- CURAS --"):setColor('green')

HealList = {'nome1', 'nome2'}

for i, v in pairs(HealList) do
    v = v:lower():trim()
end


macro(1000, 'Heal Friend 01', function()
    local healHim = false
    for _, creature in ipairs(getSpectators(posz())) do
        local specHP = creature:getHealthPercent()
        if specHP and specHP <= 99 then
            if table.find(HealList, creature:getName():lower()) or creature:getEmblem() ~= 1 then
                if creature:canShoot() then
                    if not healHim or healHimHP > specHP then
                        healHim = creature
                        healHimHP = healHim:getHealthPercent()
                    end
                end
            end
        end
    end
    if healHim then
        return say('Heal Friend' .. healHim:getName())
    end
end)





local friendlist = {'Biru', 'Tanka Rola', 'Boozanfa', ''}

--- nao editar nada abaixo disso

for i, v in ipairs(friendlist) do
  friendlist[i] = v:trim():lower()
end

canBeShoot = function(creature, distance)
    local pPos = player:getPosition()
    local cPos = creature:getPosition()
    if type(distance) == 'number' then
        if getDistanceBetween(pPos, cPos) > distance then
            return false
        end
    end
    return g_map.isSightClear(pPos, cPos)
end


macro(1, 'Heal Friend 02', function()
    local heal = false
    for _, creature in ipairs(getSpectators(posz())) do
        local specHP = creature:getHealthPercent()
        if creature:isPlayer() and specHP and specHP <= 80 then
            if table.find(friendlist, creature:getName(), true) or creature:getEmblem() == 1 or creature:getShield() >= 3 then
                if canBeShoot(creature) then
                    if not heal or heal:getHealthPercent() > specHP then
                        heal = creature
                    end
                end
            end
        end
    end
    if heal then
        say('Heal Friend "' .. heal:getName())
    end
end)



local friendlist = {'Biru', 'Tanka Rola', 'Boozanfa', ''}

--- nao editar nada abaixo disso

for i, v in ipairs(friendlist) do
  friendlist[i] = v:trim():lower()
end

canBeShoot = function(creature, distance)
    local pPos = player:getPosition()
    local cPos = creature:getPosition()
    if type(distance) == 'number' then
        if getDistanceBetween(pPos, cPos) > distance then
            return false
        end
    end
    return g_map.isSightClear(pPos, cPos)
end


macro(1, 'Heal Friend 03', function()
    local heal = false
    for _, creature in ipairs(getSpectators(posz())) do
        local specHP = creature:getHealthPercent()
        if creature:isPlayer() and specHP and specHP <= 80 then
            if table.find(friendlist, creature:getName(), true) or creature:getEmblem() == 1 or creature:getShield() >= 3 then
                if canBeShoot(creature) then
                    if not heal or heal:getHealthPercent() > specHP then
                        heal = creature
                    end
                end
            end
        end
    end
    if heal then
        say('Heal Friend "' .. heal:getName())
    end
end)



macro(100, "Heal Friend 04", function()
 local friend = getPlayerByName(storage.friendName)
   if friend and friend:getHealthPercent() < 90 then
    say('Heal Friend"' .. storage.friendName)
   delay(1000)
  end
end)

UI.Label("Player Name:")
addTextEdit("friendName", storage.friendName or "", function(widget, text)
 storage.friendName = text
end)






